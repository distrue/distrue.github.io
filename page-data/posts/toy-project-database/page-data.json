{"componentChunkName":"component---src-templates-post-template-js","path":"/posts/toy-project-database","result":{"data":{"markdownRemark":{"id":"7a8dba0a-97be-5f29-88f9-3f88791423db","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 898px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/81e5cf21d3aa22021bb02c7f1c254145/84cc5/200717.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAACRElEQVQ4y4WS628SQRTF+QP97gfjBxtrbFI1Eotai7b4KqWFpSyPaKKSWl5bQGuUSExJG6sJQaE8lE0To60SQBGBgiC7e9yZhYVGGie5mcxk9zfnnns0hu3rsL+9DW9iEY8TJloPtu9iJb4Af9oMX2qJln/HrBY5B3Ys8KZM4NIMivXPIEuSJGh0W1cx9+IaXC8NMK/rYX1+A6bQDJyvboLLWP4BqrCkAis19nowke6aoHzJpS3qx2QnoEB6cO5D+zAPhVll2D6FiKJA1VHgqJ+8yUH5kj2F8gMKbAGBFINyDyZBUaa2TGCrsm9chkHw4zLWclZawQ9WhPM2hOQ7LsvAI3vsTS0inLOjIVYooPOng263KyscQDVh3oYr9nGcN57E3KNJGNzncMdzEVPWMVxmT2PaeQZnZ49jankMJ7TH8Doew2ZsC9lcFm63Gw6HAyzLguf5noeyknmfFvp7E5h9OAn9/QkKnfdrcYk5hVsrFzDtGofRq0NwPYCve9+wEduggHg8jkgkgmg0ikKhMPCQtERaI/Dhlp/wLLicGeu8E9V2Ef9bqod0GMmlQ4Pxp2Rv3xuxlrbhx4HyuiB06U/Es/5OShBE9U4zHNjhnJFpBjMsKk1FmSgJqgolIhI5qHFRh3IULHQEjKx6q41aezDZzXd5zDifoVKtDYD9PK4mjTLMjp+t0khYqdbEfqWOYmEX7V9KFpP5L9AxHKq1xmGFJGdPc66RsD7wU7mKN7sFHBQzEEoJCJ0mfreaKJW/o95s4y8HT2DYy2c91gAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/81e5cf21d3aa22021bb02c7f1c254145/8ac56/200717.webp 240w,\n/static/81e5cf21d3aa22021bb02c7f1c254145/d3be9/200717.webp 480w,\n/static/81e5cf21d3aa22021bb02c7f1c254145/005c4/200717.webp 898w\"\n          sizes=\"(max-width: 898px) 100vw, 898px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/81e5cf21d3aa22021bb02c7f1c254145/8ff5a/200717.png 240w,\n/static/81e5cf21d3aa22021bb02c7f1c254145/e85cb/200717.png 480w,\n/static/81e5cf21d3aa22021bb02c7f1c254145/84cc5/200717.png 898w\"\n          sizes=\"(max-width: 898px) 100vw, 898px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/81e5cf21d3aa22021bb02c7f1c254145/84cc5/200717.png\"\n          alt=\"img\"\n          title=\"img\"\n          loading=\"lazy\"\n          style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        />\n      </picture>\n  </a>\n    </span></p>\n<p>RDB는 관계형 데이터 모델에 기초를 둔 데이터베이스이다. 관계형 데이터 모델은 모든 데이터를 2차원 형태의 테이블로 표현해 처리한다. 각 표현개체에 따라 데이터 간의 상관관계에서 개체간의 관계를 표현한 것이다. 각 Table을 schema를 통해 정의하고, SQL 질의문을 통해 데이터를 처리한다.</p>\n<h3 id=\"relational-db--nosql\" style=\"position:relative;\"><a href=\"#relational-db--nosql\" aria-label=\"relational db  nosql permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Relational DB &#x26; NoSQL</h3>\n<p>최근 대부분의 DB들은 크게 RDB(Relational DB)와 NoSQL(Not only SQL) 분류로 구분된다.</p>\n<p>NoSQL은 기존 관계형 DBMS가 갖고 있는 특성 외에 부가적인 특성을 지원하는 DB를 말한다. 우리에게 가장 익숙한 NoSQL은 DocumentDB(MongoDB가 대표적)과 Key-Value(Redis) 방식 등이 있다. 그 중에서도 이번에는 RDB와 DocumentDB에 대해 자세히 살펴보고자 한다.</p>\n<h3 id=\"rdb-vs-documentdb-각각-언제-써야-할까\" style=\"position:relative;\"><a href=\"#rdb-vs-documentdb-%EA%B0%81%EA%B0%81-%EC%96%B8%EC%A0%9C-%EC%8D%A8%EC%95%BC-%ED%95%A0%EA%B9%8C\" aria-label=\"rdb vs documentdb 각각 언제 써야 할까 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>RDB vs DocumentDB, 각각 언제 써야 할까?</h3>\n<p>보통 토이 프로젝트를 처음 시작할 때 RDB, DocumentDB 중 하나를 골라 프로젝트를 진행한다. 이전에 프로젝트를 작업할 때도 DoucmentDB (대부분 MongoDB)가 RDB보다 적용이 쉽다고 생각해 큰 고민 없이 선택했는데, 새로 프로젝트를 진행하면서 어떤 DB를 쓸지 고민하던 차 각각 언제 사용이 적합한지 알아보고자 한다.</p>\n<p>DocumentDB은 다음과 같은 특징을 장점으로 보인다.</p>\n<p>스키마없음: Schema를 사용하지 않음, 정형 데이터가 아닌 비정형 데이터 처리가 용이함\n관계 없음: 관계형 모델을 사용하지 않음, 테이블 간의 Join 없음 (populate, aggregate 등을 활용)\nRDB는 scale-up만 가능, NoSQL은 scale-up/scale-out이 둘 다 가능함</p>\n<p>RDB는 master-slave 모델을 통해 해결함\n데이터에 직접 접근하기 때문에 Read-Write의 일반적 동작의 Performance가 RDB보다 빠름\nJSON 형태의 직관적인 형태로 개발이 편리\n그러나, 각 장점은 상응하는 단점을 갖는다.</p>\n<p>고정된 스키마가 없다는 것은 데이터의 무결성, 정합성이 보장되지 않는다는 것임. 따라서 데이터를 처리할 때 정형 처리가 아닌 반정형/비정형 처리를 해야하며, 처리 시 문제가 발생하지 않도록 적절히 스키마를 설계해야 함 (고정된 스키마가 없는 것이지, 스키마 자체가 없는 것은 아님)\n관계가 없기 때문에 데이터 update 시 중복되는 데이터를 찾아 같이 수정해주어야 함. JOIN 명령이 없다는 점에서도 JOIN을 사용할 필요가 없도록 기존 RDB와는 다른 방식으로 Document를 정의해야 함.\nScale-out이 되는 것은 분산환경에 도움이 됨, 그러나 RDB도 클라우드 환경으로 이동하며 확장에 용이해졌음.\n빠른 처리, 대용량 처리에는 용이하나, 배포되는 환경에서의 제약을 고려해야 한다. Document DB의 경우 insert/read 형식에는 유리하나 update의 불편함이 있다\n새로운 저장방식을 이용해 데이터를 write할 때 논리적으로 memory 공간에 임시로 쓰고, 일정 주기마다 이를 disk로 옮기는 방식을 씀, 따라서 메모리 크기가 DB 성능에 영향을 미치게 됨\n위와 같은 차이점에 따라, DocumentDB가 적합한 경우를 각각 나누었다. (RDB는 그 반대)</p>\n<h3 id=\"documentdb가-적합한-경우\" style=\"position:relative;\"><a href=\"#documentdb%EA%B0%80-%EC%A0%81%ED%95%A9%ED%95%9C-%EA%B2%BD%EC%9A%B0\" aria-label=\"documentdb가 적합한 경우 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>DocumentDB가 적합한 경우</h3>\n<p>Insert하고 Update나 Delete가 잦지 않은 환경 (로그, 세션 등)\n트렌섹션의 무결성/정합성이 강조되지 않는 환경 (금융 처리 등)\n비정형 데이터의 중요성이 강조될 때 (변경이 잦거나, 커뮤니티, SNS등 테이블을 나누면 transaction 고통이 많을 때)</p>\n<h3 id=\"잘못된-db-선택-방법\" style=\"position:relative;\"><a href=\"#%EC%9E%98%EB%AA%BB%EB%90%9C-db-%EC%84%A0%ED%83%9D-%EB%B0%A9%EB%B2%95\" aria-label=\"잘못된 db 선택 방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>잘못된 DB 선택 방법</h3>\n<p>대용량 처리나 속도를 생각해서: 다른 해결책들이 충분히 많기도 하고, 컴퓨팅 환경 제한도 더욱 나아지고 있기 때문에 눈에 띄는 차이를 경험하지는 않는다.\n스키마 변경이 쉬우니까: DocumentDB는 JOIN이 없는 만큼 복잡한 형태의 Transaction이 적용되는 경우 schema 설계가 어렵다. 대충 짠 schema는 나중에 query 작성 때 큰 어려움을 가져온다…</p>\n<h3 id=\"추가로-고려해볼-사항\" style=\"position:relative;\"><a href=\"#%EC%B6%94%EA%B0%80%EB%A1%9C-%EA%B3%A0%EB%A0%A4%ED%95%B4%EB%B3%BC-%EC%82%AC%ED%95%AD\" aria-label=\"추가로 고려해볼 사항 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>추가로 고려해볼 사항</h3>\n<p>배포 환경: 특히 클라우드에 서비스를 배포하는 경우에는 비용적인 측면으로 보면 오히려 serverless DB가 잘 구성되어 있는 RDB가 더 합리적일 수 있다.</p>","fields":{"slug":"/posts/toy-project-database","tagSlugs":["/tag/database/"]},"frontmatter":{"date":"2020-07-17T22:00:37.121Z","description":"RDB와 DocumentDB의 비교와 실제 선정할 때 고려할 요인들을 정리해 보았습니다","tags":["Database"],"title":"토이 프로젝트의 DB 선택(RDB, DocumentDB)","socialImage":{"publicURL":"/static/81e5cf21d3aa22021bb02c7f1c254145/200717.png"}}}},"pageContext":{"slug":"/posts/toy-project-database"}},"staticQueryHashes":["251939775","401334301","825871152"]}